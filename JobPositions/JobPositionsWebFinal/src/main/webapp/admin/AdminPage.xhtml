<ui:composition template="/WEB-INF/template/CommonLayout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:o="http://omnifaces.org/ui">

	<ui:define name="title">Admin Menu</ui:define>
	<ui:define name="bar">#{systemUser.loggedUserName}</ui:define>
	<ui:define name="body">
		<pe:importEnum type="enumeration.JobStatus" var="enumJobStatus"
			allSuffix="ALL_ENUM_VALUES" />

		<p:tabView id="tab">
			<p:tab title="Job Positions">
				<h:form id="frm">
					<p:messages autoUpdate="true" closable="true" />
					<p:dataTable value="#{jobPositionBean.jobpositions}" var="position"
						rows="8" emptyMessage="No records found." paginator="true"
						paginatorPosition="bottom"
						paginatorTemplate=" {FirstPageLink} {PreviousPageLink}
						 {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						id="jobstable" sortMode="single">

						<p:column styleClass="jobs-table" headerText="Job Title"
							style="text-align: center; width:200px"
							sortBy="#{position.title}">
							<h:outputText value="#{position.title}" />
						</p:column>
						<p:column headerText="Location"
							style="text-align: center; width:150px"
							sortBy="#{position.location}">
							<h:outputText value="#{position.location}" />
						</p:column>
						<p:column headerText="Date"
							style="text-align: center; width:150px">
							<h:outputText value="#{position.finalDate}" />
						</p:column>

						<p:column headerText="# Candidates"
							style="text-align: center; width:150px">
							<h:outputText value="#{position.vacancies}" />
						</p:column>
						<p:column style="width:16px">
							<p:rowToggler />
						</p:column>
						<p:rowExpansion id="rowselection">
							<p:panelGrid columns="2" columnClasses="label, field"
								style="width:100%;">

								<h:outputText value="Job Code" />
								<h:outputText value="#{position.positionCode}" />

								<h:outputText value="Job Function" />
								<h:outputText value="#{position.technicalArea}" />

								<h:outputText value="# of openings" />
								<h:outputText value="#{position.vacancies}" />

								<h:outputText value="Responsable" />
								<h:outputText value="#{position.responsable}" />
							</p:panelGrid>

							<p:panelGrid columns="1" style="width:100%;">
								<h:outputText value="#{position.jobDescription}" />
							</p:panelGrid>
						</p:rowExpansion>

						<p:column headerText="" style="text-align: center; width:40px;">
							<p:commandButton icon="ui-icon-trash" oncomplete="confirm.show()">
								<f:setPropertyActionListener
									target="#{jobPositionBean.selectPosition}" value="#{position}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>

					<p:confirmDialog header="Delete position"
						message="Are you sure you want to delete the select element?"
						widgetVar="confirm">
						<p:commandButton valeu="OK" update="jobstable"
							oncomplete="confirm.hide()"
							action="#{jobPositionBean.removePosition}" />
						<p:commandButton valeu="Cancel"
							onclick="confirm.hide();return false;" />
					</p:confirmDialog>
				</h:form>
			</p:tab>

			<p:tab title="New Position">
				<div id="loginfrm">
					<h:form id="frmEdit">
						<p:messages id="messageForm2" closable="true" autoUpdate="true" />
						<p:panel id="panel" style="border-width: 0px;">

							<h:panelGrid styleClass="inputTable" columns="2"
								cellpadding="4px" cellspacing="4px">
								<h:panelGrid styleClass="inputTable2" columns="2"
									cellpadding="4px" cellspacing="4px">
									<p:outputLabel value="Date (start)" for="startDate" />
									<p:outputLabel value="Date (end)" for="endDate" />

									<p:calendar id="startDate" required="true"
										value="#{jobPositionBean.creationDate}" style="width:10%;"
										size="10" pattern="dd/MM/yyyy"
										mindate="#{jobPositionBean.actualDate}" />
									<p:calendar id="endDate" required="true"
										value="#{jobPositionBean.finalDate}" style="width:10%;"
										size="10" pattern="dd/MM/yyyy" />
								</h:panelGrid>

								<h:panelGrid columns="2" cellpadding="4px" cellspacing="4px">
									<p:outputLabel value="SLA" for="sla" />
									<p:outputLabel value="CODE" for="jobposition" />
									<p:inputText id="sla" required="true"
										value="#{jobPositionBean.sla}" style="width:100%;" />
									<p:inputText id="jobposition" required="true"
										value="#{jobPositionBean.positionCode}" style="width:100%;" />
								</h:panelGrid>

								<p:outputLabel value="Title" for="title" />
								<p:outputLabel value="Location" for="location" />

								<p:inputText id="title" required="true"
									value="#{jobPositionBean.title}" />
								<p:inputText id="location" required="true"
									value="#{jobPositionBean.location}" />

								<p:outputLabel value="Status" for="status" />
								<p:outputLabel value="Vacancies" for="vacancies" />

								<p:selectOneMenu id="status"
									value="#{jobPositionBean.jobStatus}">
									<f:selectItem itemLabel="Selecione a Localização" />
									<f:selectItems value="#{JobStatus.ALL_ENUM_VALUES}"
										var="status" itemLabel="#{status.toString}"
										itemValue="#{status}">
									</f:selectItems>
								</p:selectOneMenu>

								<p:inputText id="vacancies" value="#{jobPositionBean.vacancies}" />

								<p:outputLabel value="Responsable" for="responsable" />
								<p:outputLabel value="Technical Area" for="tarea" />

								<p:inputText id="responsable" required="true"
									value="#{jobPositionBean.responsable}" />
								<p:inputText id="tarea" required="true"
									value="#{jobPositionBean.technicalArea}" />

								<p:outputLabel value="Company" for="company" />
								<p:outputLabel value="Job description" for="description" />

								<p:inputText id="company" required="true"
									value="#{jobPositionBean.company}" />
								<p:inputTextarea id="description"
									value="#{jobPositionBean.jobDescription}" cols="40" rows="4"
									autoResize="false" />
								<h:outputText />
							</h:panelGrid>
							<div class="out">
								<div class="in">
									<h:panelGrid columns="1">
										<p:commandButton value="SAVE"
											action="#{jobPositionBean.saveJobPosition}"
											icon="ui-icon-disk" update="tab:frm:jobstable" />
									</h:panelGrid>
								</div>
							</div>
						</p:panel>

						<p:tab title="New User">
							<div id="loginfrm">
								<h:form id="frmNewUser">
									<p:messages autoUpdate="true" closable="true" />
									<p:panel id="panel" style="border-width: 0px;">

										<h:panelGrid styleClass="inputTable" columns="2"
											cellpadding="4px" cellspacing="4px">
											<p:selectOneMenu id="role"
												value="#{newUserInputBean.role}">
												<f:selectItem id="item1" itemLabel="Administrator"
													itemValue="ADMINISTRATOR" />
												<f:selectItem id="item2" itemLabel="Manager" itemValue="MANAGER" />
												<f:selectItem id="item3" itemLabel="Interviewer"
													itemValue="INTERVIEWER" />
												<f:selectItem id="item4" itemLabel="Candidate" itemValue="CANDIDATE" />
											</p:selectOneMenu>
											<p:outputLabel value="Name" for="name" />
											<p:outputLabel value="Email" for="email" />

											<p:inputText id="name" value="#{newUserInputBean.name}" />
											<p:inputText id="email" value="#{newUserInputBean.email}" />

										</h:panelGrid>
								</h:form>
							</div>
						</p:tab>

					</h:form>
				</div>
			</p:tab>

		</p:tabView>

	</ui:define>

</ui:composition>
