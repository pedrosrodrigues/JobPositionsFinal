<ui:composition template="/WEB-INF/template/CommonLayout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="title">User Menu</ui:define>
	<ui:define name="bar">
		<h2>#{systemUser.loggedUserName}</h2>
	</ui:define>
	<ui:define name="body">
		<f:metadata>
			<f:viewParam name="PositionCode" />
			<f:event listener="#{applicationBean.start}" type="preRenderView" />
		</f:metadata>

		<p:tabView id="tab">
			<p:tab title="Job Positions">
				<h:form id="frm">
					<div id="loginfrm">
						<p:messages id="submitanswer" closable="true" />
						<p:dataTable value="#{jobPositionBean.jobpositions}"
							var="position" rows="8" emptyMessage="No records found."
							paginator="true" paginatorPosition="bottom"
							paginatorTemplate=" {FirstPageLink} {PreviousPageLink}
						 {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							id="jobstable" sortMode="single">

							<p:column styleClass="jobs-table" headerText="Job Title"
								style="text-align: center; width:200px"
								sortBy="#{position.title}">
								<h:outputText value="#{position.title}" />
							</p:column>
							<p:column headerText="Location"
								style="text-align: center; width:150px"
								sortBy="#{position.location}">
								<h:outputText value="#{position.location}" />
							</p:column>
							<p:column headerText="Final Date"
								style="text-align: center; width:150px"
								sortBy="#{position.finalDate}">
								<h:outputText value="#{position.finalDate}" />
							</p:column>
							<p:column headerText="Job Status"
								style="text-align: center; width:150px">
								<h:outputText value="#{position.jobStatus}" />
							</p:column>

							<p:column style="width:16px">
								<p:rowToggler id="rowToggler" />
							</p:column>

							<p:rowExpansion id="rowselection">
								<p:panelGrid columns="2" columnClasses="label, field"
									style="width:100%;">

									<h:outputText value="Job Code" />
									<h:outputText value="#{position.positionCode}" />

									<h:outputText value="Job Function" />
									<h:outputText value="#{position.technicalArea}" />

									<h:outputText value="# of openings" />
									<h:outputText value="#{position.vacancies}" />
								</p:panelGrid>

								<p:panelGrid columns="1" style="width:100%;">
									<h:outputText value="#{position.jobDescription}" />
									<p:commandButton value="Submit" id="ajax"
										action="#{applicationBean.saveApp(position.id)}"
										update="tab:frm1:myappstable tab:frm:submitanswer" />
								</p:panelGrid>
							</p:rowExpansion>
						</p:dataTable>
					</div>
				</h:form>
			</p:tab>
			<p:tab title="My Applications">
				<h:form id="frm1">
					<div id="loginfrm">
						<p:dataTable id="myappstable" value="#{applicationBean.listApp}"
							var="applist" rows="10" emptyMessage="No records found."
							paginator="true" paginatorPosition="bottom"
							paginatorTemplate=" {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">

							<p:column styleClass="jobs-table" headerText="Job Title"
								style="text-align: center; width:200px">
								<h:outputText value="#{applist.jobEntity.title}" />
							</p:column>
							<p:column headerText="Location"
								style="text-align: center; width:150px">
								<h:outputText value="Portugal,(Coimbra)" />
							</p:column>
							<p:column headerText="Application status"
								style="text-align: center; width:150px">
								<h:outputText value="#{applist.appStatus}" />
							</p:column>

							<p:column style="width:16px">
								<p:rowToggler />
							</p:column>

							<p:rowExpansion id="rowselection">
								<p:panelGrid columns="2" columnClasses="label, field"
									style="width:100%;">

									<h:outputText value="Job Code" />
									<h:outputText value="JP-#{applist.jobEntity.id}" />

									<h:outputText value="Job Function" />
									<h:outputText value="#{applist.jobEntity.technicalArea}" />

									<h:outputText value="Location" />
									<h:outputText value="#{applist.jobEntity.location}" />

									<h:outputText value="# of openings" />
									<h:outputText value="#{applist.jobEntity.vacancies}" />

								</p:panelGrid>
								<p:panelGrid columns="1" style="width:100%;">
									<h:outputText value="#{applist.jobEntity.jobDescription}" />
								</p:panelGrid>
							</p:rowExpansion>
						</p:dataTable>
					</div>
				</h:form>
			</p:tab>

			<p:tab title="My profile">
				<div id="loginfrm">
					<h:form id="frmEdit">
						<p:messages id="myprofileMsg" closable="true" />
						<p:panel id="panel2" style="border-width:0px;">
							<h:panelGrid styleClass="inputTable" columns="2"
								cellpadding="4px" cellspacing="4px">

								<p:outputLabel value="First Name" for="fname" />
								<p:outputLabel value="Last Name" for="lname" />

								<p:inputText id="fname" value="#{candidateBean.firstname}" />
								<p:inputText id="lname" value="#{candidateBean.lastname}" />

								<p:outputLabel value="Email" for="email" />
								<p:outputLabel value="Adress" for="adress" />

								<p:inputText id="email" value="#{candidateBean.email}" readonly="true" />
								<p:inputText id="adress" value="#{candidateBean.address}" />

								<p:outputLabel value="City" for="city" />
								<p:outputLabel value="Country" for="country" />

								<p:inputText id="city" value="#{candidateBean.city}" />
								<p:inputText id="country" value="#{candidateBean.country}" />

								<p:outputLabel value="Phone" for="phone" />
								<p:outputLabel value="Mobile" for="mobile" />

								<p:inputText id="phone" value="#{candidateBean.phone}" />
								<p:inputText id="mobile" value="#{candidateBean.mobile}" />

								<p:outputLabel value="Main Course" for="mcourse" />
								<p:outputLabel value="School" for="school" />

								<p:inputText id="mcourse" required="true"
									value="#{candidateBean.course}" />
								<p:inputText id="school" required="true"
									value="#{candidateBean.school}" />

								<p:outputLabel value="Password" for="password" />
								<p:outputLabel value="Confirm Password" for="confpassword" />

								<p:password id="password" required="true" match="confpassword"
									feedback="true" value="#{candidateBean.password}" />
								<p:password id="confpassword" required="true" />

								<p:outputLabel value="Linkedin Profile" for="linkin" />
								<p:outputLabel value="#" />

								<p:inputText id="linkin" value="#{candidateBean.linkedin}" />
								<p:outputLabel />
							</h:panelGrid>
							<div class="out">
								<div class="in">
									<h:panelGrid columns="1">
										<p:outputLabel value="Upload your CV" for="cv"
											style="font-weight: bolder;"></p:outputLabel>
										<p:outputLabel value="PDF format, max size: 1Mb" for="cv" />
										<p:fileUpload dragDropSupport="true" label="UPLOAD CV" id="cv" />

										<p:outputLabel value="Upload your motivation letter"
											for="mletter" style="font-weight: bolder;"></p:outputLabel>
										<p:outputLabel value="PDF format, max size: 1Mb" for="mletter" />
										<p:fileUpload dragDropSupport="true" label="UPLOAD LETTER"
											id="mletter" />
										<p:outputLabel value="" />
										<p:commandButton value="SAVE"
											action="#{candidateBean.updateCandidate}" update="tab:frmEdit:myprofileMsg" />
									</h:panelGrid>
								</div>
							</div>
						</p:panel>
					</h:form>
				</div>
			</p:tab>
			<p:tab title="Other stuff">
		Se houver necessidade fica, sen√£o sai.
				</p:tab>
		</p:tabView>



	</ui:define>



</ui:composition>